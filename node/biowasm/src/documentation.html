<!DOCTYPE html>
<html lang="en">
	<head>
		<meta charset="utf-8" />
		<link rel="icon" href="favicon.ico" />
		<meta name="viewport" content="width=device-width" />
		<title>Documentation</title><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" data-svelte="svelte-5cxmaq"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.7.0/font/bootstrap-icons.css" data-svelte="svelte-5cxmaq">
	<link href="_app/immutable/assets/Offcanvas-60614438.css" rel="stylesheet">
	<link href="_app/immutable/assets/+page-265f3b7e.css" rel="stylesheet">
	</head>
	<body>
		<div>






<nav class="navbar navbar-expand-md navbar-light bg-light"><div class="container"><a class="navbar-brand" href="index.html"><img alt="biowasm logo" height="40" src="logo.png">
		ORG
	</a>
	<button class="navbar-toggler btn btn-secondary" value="" style="">
    <span class="navbar-toggler-icon"></span>
  </button>
	

</div></nav>


<div class="mt-4 container">

<h4 class="svelte-jf2zsf">Documentation</h4>

<div class="col-xl-8">
	
	
	<ul class="small list-group list-group-flush"><li class="list-group-item" active="false"></li>
		<a class="list-group-item" href="documentation.html#introduction" active="false">Introduction</a>
		<a class="list-group-item" href="documentation.html#examples" active="false">Code Examples</a>
		<a class="list-group-item" href="documentation.html#aioli" active="false">API documentation</a>
		<a class="list-group-item" href="documentation.html#no-cdn" active="false">Biowasm without a CDN</a>
		<li class="list-group-item" active="false"></li></ul>

	
	
	
	<h4 id="introduction" class="svelte-jf2zsf">Introduction</h4>
	<p class="svelte-jf2zsf">The biowasm project compiles popular C/C++ genomics tools to <a href="https://developer.mozilla.org/en-US/docs/WebAssembly" target="_blank">WebAssembly</a> so they can run in a web browser. Biowasm includes a JavaScript library called <strong>Aioli</strong> that helps you run these tools with very little setup, as we&#39;ll see below.
	</p>

	<br>

	
	
	
	<h4 id="examples" class="svelte-jf2zsf">Code Examples</h4>

	
	<h5 id="simple-example" class="svelte-jf2zsf">A simple example</h5>
	<p class="svelte-jf2zsf">Say you&#39;re building a web app that analyzes sequencing data by parsing user-provided <a href="https://en.wikipedia.org/wiki/Binary_Alignment_Map" target="_blank">BAM files</a>. On the command-line, you would use the program <a href="http://www.htslib.org/" target="_blank">samtools</a> to parse these files; with biowasm, you can write a few lines of code and run <code>samtools</code> directly in the browser:
	</p>
	
	<p class="svelte-jf2zsf">Note that we ran <code>samtools view</code> on a sample file <code>/samtools/examples/toy.sam</code> that comes preloaded with biowasm for testing purposes.
	</p>

	
	<h5 id="local-files" class="svelte-jf2zsf">Process local user files</h5>
	<p class="svelte-jf2zsf">To run <code>samtools</code> on a user-provided file (download one <a href="https://raw.githubusercontent.com/samtools/samtools/develop/examples/toy.sam" target="_blank">here</a>), we need to mount the user&#39;s file onto a virtual file system before we can use it within Aioli:
	</p>
	<div class="alert alert-info" role="alert">
    
    <strong>Note:</strong> Mounting a file does <strong>not</strong> load its contents in memory! For example, selecting a 500GB BAM file below will work just fine since <code>samtools view -H</code> only parses the header of the file.<br><br>One common use case for biowasm is to efficiently process small subsets of large files in the browser, e.g. parse the very top/bottom of a file, or randomly subsample a large file.
	</div>
	

	
	<h5 id="remote-files" class="svelte-jf2zsf">Process remote user files</h5>
	<p class="svelte-jf2zsf">You can even mount URLs as long as they are <a href="https://developer.mozilla.org/en-US/docs/Web/HTTP/CORS" target="_blank">CORS-enabled</a>:
	</p>
	<div class="alert alert-info" role="alert">
    
    <strong>Note:</strong> Similar to local files, mounting URLs does not load their entire contents into memory. Below, we mount a 300MB BAM file and ask <code>samtools</code> for a small subset of chromosome 20. As you can see in your browser&#39;s <code>Network</code> tab, only a few megabytes of relevant data are downloaded for this step.
	</div>
	

	
	<h5 id="multiple-tools" class="svelte-jf2zsf">Run multiple tools</h5>
	<p class="svelte-jf2zsf">Biowasm also supports running multiple tools at once. Below, we first run <code>seqtk</code> on the output of a <code>samtools</code> command:
	</p>
	

	<br>

	
	
	
	<h4 id="aioli" class="svelte-jf2zsf">Aioli API</h4>

	
	<h5 id="aioli-init" class="svelte-jf2zsf">Initialization</h5>
	<h6 id="aioli-init-simple" class="svelte-jf2zsf">Simple Initialization</h6>
	<p class="svelte-jf2zsf">Most tools can be initialized using a name and a version (see the <a href="cdn/v3.html">Packages</a> page for supported versions):
	</p>

	<pre class="svelte-cu7vw2"><!-- HTML_TAG_START --><span class="hljs-keyword">new</span> <span class="hljs-title class_">Aioli</span>([<span class="hljs-string">&quot;samtools/1.10&quot;</span>, <span class="hljs-string">&quot;seqtk/1.3&quot;</span>]);<!-- HTML_TAG_END --></pre>
	<p class="svelte-jf2zsf">For tools that include multiple sub-tools, you need to specify which ones you want to load:
	</p>
	<pre class="svelte-cu7vw2"><!-- HTML_TAG_START --><span class="hljs-keyword">new</span> <span class="hljs-title class_">Aioli</span>([<span class="hljs-string">&quot;coreutils/head/8.32&quot;</span>, <span class="hljs-string">&quot;coreutils/tail/8.32&quot;</span>]);<!-- HTML_TAG_END --></pre>

	<h6 id="aioli-init-advanced" class="svelte-jf2zsf">Advanced Initialization</h6>
	<p class="svelte-jf2zsf">If you need to customize the URL where the WebAssembly assets are stored, or the lazy-loading behavior of a module, you can use the following initialization format:
	</p>
	<pre class="svelte-cu7vw2"><!-- HTML_TAG_START --><span class="hljs-keyword">new</span> <span class="hljs-title class_">Aioli</span>([{
    <span class="hljs-attr">tool</span>: <span class="hljs-string">&quot;coreutils&quot;</span>,
    <span class="hljs-attr">version</span>: <span class="hljs-string">&quot;8.32&quot;</span>,
    <span class="hljs-attr">program</span>: <span class="hljs-string">&quot;head&quot;</span>,         <span class="hljs-comment">// Optional: sub-tool name; not needed for most tools (default: same as tool name)</span>
    <span class="hljs-attr">urlPrefix</span>: <span class="hljs-string">&quot;./assets/&quot;</span>,  <span class="hljs-comment">// Optional: custom path to .wasm assets (default: biowasm CDN)</span>
    <span class="hljs-attr">loading</span>: <span class="hljs-string">&quot;lazy&quot;</span>,         <span class="hljs-comment">// Optional: if set to &quot;lazy&quot;, only downloads WebAssembly modules when needed, not at initialization (default: eager)</span>
    <span class="hljs-attr">reinit</span>: <span class="hljs-literal">false</span>,           <span class="hljs-comment">// Optional: if set to true, will reinitialize module after each invocation; not needed for most tools</span>
}], {
    <span class="hljs-attr">printInterleaved</span>: <span class="hljs-literal">true</span>,  <span class="hljs-comment">// Optional: whether to return interleaved stdout/stderr; if false, returns object with stdout/stderr keys (default: true)</span>
    <span class="hljs-attr">debug</span>: <span class="hljs-literal">false</span>,            <span class="hljs-comment">// Optional: set to true to see console log messages for debugging (default: false)</span>
});<!-- HTML_TAG_END --></pre>

	<h5 id="aioli-api" class="svelte-jf2zsf">Utility functions</h5>
	<h6 id="aioli-api-exec" class="svelte-jf2zsf">Run a command</h6>
	<pre class="svelte-cu7vw2"><!-- HTML_TAG_START --><span class="hljs-comment">// Simple command</span>
<span class="hljs-keyword">await</span> <span class="hljs-variable constant_">CLI</span>.<span class="hljs-title function_">exec</span>(<span class="hljs-string">&quot;samtools view&quot;</span>);

<span class="hljs-comment">// To escape arguments, use an array instead of a string</span>
<span class="hljs-keyword">await</span> <span class="hljs-variable constant_">CLI</span>.<span class="hljs-title function_">exec</span>(<span class="hljs-string">&quot;jq&quot;</span>, [
    <span class="hljs-string">&quot;.some.data&quot;</span>,
    <span class="hljs-string">&quot;data.json&quot;</span>
]);<!-- HTML_TAG_END --></pre>

	<h6 id="aioli-api-mount" class="svelte-jf2zsf">Mount local and remote files</h6>
	<p class="svelte-jf2zsf">See examples above for how to mount <a href="documentation.html#local-files">local files</a> and <a href="documentation.html#remote-files">remote URLs</a>.</p>
	<p class="svelte-jf2zsf">The function <code>CLI.mount()</code> can mount one (or an array of) <code>File</code> objects, <code>Blob</code> objects, a <code>FileList</code>, strings, or URLs:</p>
	<pre class="svelte-cu7vw2"><!-- HTML_TAG_START --><span class="hljs-comment">// Mount a list of user-provided File objects</span>
<span class="hljs-variable language_">document</span>.<span class="hljs-title function_">getElementById</span>(<span class="hljs-string">&quot;myfiles&quot;</span>).<span class="hljs-title function_">addEventListener</span>(<span class="hljs-string">&quot;change&quot;</span>, <span class="hljs-keyword">async</span> event =&gt; {
    <span class="hljs-keyword">await</span> <span class="hljs-variable constant_">CLI</span>.<span class="hljs-title function_">mount</span>(event.<span class="hljs-property">target</span>.<span class="hljs-property">files</span>);
});

<span class="hljs-comment">// Mount URLs</span>
<span class="hljs-keyword">await</span> <span class="hljs-variable constant_">CLI</span>.<span class="hljs-title function_">mount</span>([
    { <span class="hljs-attr">name</span>: <span class="hljs-string">&quot;filename.txt&quot;</span>, <span class="hljs-attr">url</span>: <span class="hljs-string">&quot;https://url...&quot;</span> },
    { <span class="hljs-attr">name</span>: <span class="hljs-string">&quot;filename2.txt&quot;</span>, <span class="hljs-attr">url</span>: <span class="hljs-string">&quot;https://url2...&quot;</span> },
]);

<span class="hljs-comment">// Mount a string to path filename.txt</span>
<span class="hljs-keyword">await</span> <span class="hljs-variable constant_">CLI</span>.<span class="hljs-title function_">mount</span>([{
    <span class="hljs-attr">name</span>: <span class="hljs-string">&quot;filename.txt&quot;</span>,
    <span class="hljs-attr">data</span>: <span class="hljs-string">&quot;This is a data file&quot;</span>
}]);

<span class="hljs-comment">// Mount a Blob to path filename.txt</span>
<span class="hljs-keyword">await</span> <span class="hljs-variable constant_">CLI</span>.<span class="hljs-title function_">mount</span>([{
    <span class="hljs-attr">name</span>: <span class="hljs-string">&quot;filename.txt&quot;</span>,
    <span class="hljs-attr">data</span>: &lt;<span class="hljs-title class_">Blob</span>&gt;
}]);<!-- HTML_TAG_END --></pre>

	<h6 id="aioli-api-fs" class="svelte-jf2zsf">File system utilities</h6>
	<pre class="svelte-cu7vw2"><!-- HTML_TAG_START --><span class="hljs-comment">// Returns a blob URL so the user can download a file out of the virtual file system</span>
<span class="hljs-keyword">const</span> url = <span class="hljs-keyword">await</span> <span class="hljs-variable constant_">CLI</span>.<span class="hljs-title function_">download</span>(<span class="hljs-string">&quot;/path/to/a/file&quot;</span>);

<span class="hljs-comment">// Basic ls, cd, mkdir, pwd utilities</span>
<span class="hljs-keyword">await</span> <span class="hljs-variable constant_">CLI</span>.<span class="hljs-title function_">mkdir</span>(<span class="hljs-string">&quot;/some/path&quot;</span>);
<span class="hljs-keyword">await</span> <span class="hljs-variable constant_">CLI</span>.<span class="hljs-title function_">ls</span>(<span class="hljs-string">&quot;/some/path&quot;</span>);
<span class="hljs-keyword">await</span> <span class="hljs-variable constant_">CLI</span>.<span class="hljs-title function_">cd</span>(<span class="hljs-string">&quot;/some/path&quot;</span>);
<span class="hljs-keyword">await</span> <span class="hljs-variable constant_">CLI</span>.<span class="hljs-title function_">pwd</span>();<!-- HTML_TAG_END --></pre>

	<div class="alert alert-info" role="alert">
    
    <strong>Note:</strong> File system utilities operate on a virtual file system; they cannot operate directly on user files.
	</div>

	<h6 id="aioli-api-stdin" class="svelte-jf2zsf">Standard IO</h6>
	<p class="svelte-jf2zsf">If a tool needs to interact with <code>stdin</code>, set <code>CLI.stdin</code> before making the call to the tool:</p>
	<pre class="svelte-cu7vw2"><!-- HTML_TAG_START --><span class="hljs-variable constant_">CLI</span> = <span class="hljs-keyword">await</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Aioli</span>([<span class="hljs-string">&quot;coreutils/cat/8.32&quot;</span>]);
<span class="hljs-variable constant_">CLI</span>.<span class="hljs-property">stdin</span> = <span class="hljs-string">&quot;Hello World&quot;</span>;
<span class="hljs-keyword">await</span> <span class="hljs-variable constant_">CLI</span>.<span class="hljs-title function_">exec</span>(<span class="hljs-string">&quot;cat&quot;</span>);  <span class="hljs-comment">// Will return Hello World</span><!-- HTML_TAG_END --></pre>

	<br>

	
	<h4 id="no-cdn" class="svelte-jf2zsf">Biowasm without the CDN</h4>
	<p class="svelte-jf2zsf">The examples above use the biowasm CDN, which is where the WebAssembly assets for the genomics tools are hosted for free. Most tools that use biowasm rely on the CDN, but if you would like to store your assets alongside your app, here&#39;s how to do so:
	</p>

	<h6 class="svelte-jf2zsf">Step 1: Install the Aioli package</h6>
	<p class="svelte-jf2zsf">Instead of importing Aioli using
	</p>
	<pre class="svelte-cu7vw2"><!-- HTML_TAG_START --><span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">src</span>=<span class="hljs-string">&quot;https://biowasm.com/cdn/v3/aioli.js&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span><!-- HTML_TAG_END --></pre>
	<p class="svelte-jf2zsf">you can install Aioli with npm:
	</p>
	<pre class="svelte-cu7vw2"><!-- HTML_TAG_START -->npm install --save &quot;@biowasm/aioli&quot;<!-- HTML_TAG_END --></pre>
	<p class="svelte-jf2zsf">Then you can import Aioli as follows:
	</p>
	<pre class="svelte-cu7vw2"><!-- HTML_TAG_START --><span class="hljs-keyword">import</span> <span class="hljs-title class_">Aioli</span> <span class="hljs-keyword">from</span> <span class="hljs-string">&quot;@biowasm/aioli&quot;</span>;<!-- HTML_TAG_END --></pre>

	<h6 class="svelte-jf2zsf">Step 2: Download Biowasm assets</h6>
	<p class="svelte-jf2zsf">Note that even if you import Aioli locally with <code>npm</code>, the WebAssembly modules will still be downloaded from the biowasm CDN unless you download those assets locally as well.
	</p>
	<p class="svelte-jf2zsf">To do so, navigate to the <a href="cdn/v3.html">Packages page</a> and download the files for each tool of interest.
	</p>

	<h6 class="svelte-jf2zsf">Step 3: Set up Aioli</h6>
	<p class="svelte-jf2zsf">Once your assets are downloaded, you need to let Aioli know the relative URL path where it can find those assets from your server. Use the config parameter <code>urlPrefix</code> as shown in the <a href="documentation.html#aioli-init-advanced:~:text=urlPrefix%3A%20%22./assets/%22%2C">Initialization</a> section above.
	</p>

	<br><br><br>
</div></div>


		<script type="module" data-sveltekit-hydrate="1ci09vl">
		import { set_public_env, start } from "./_app/immutable/start-cf660234.js";

		set_public_env({});

		start({
			target: document.querySelector('[data-sveltekit-hydrate="1ci09vl"]').parentNode,
			paths: {"base":"","assets":""},
			route: true,
			spa: false,
			trailing_slash: "never",
			hydrate: {
				status: 200,
				error: null,
				node_ids: [0, 8],
				params: {},
				routeId: "documentation"
			}
		});
	</script>
	</div>
	</body>
</html>
